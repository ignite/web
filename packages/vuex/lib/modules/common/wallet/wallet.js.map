{"version":3,"sources":["../../../../src/modules/common/wallet/wallet.js"],"names":["getDecryptor","password","secret","encryptedMnemonic","HDpath","mnemonic","CryptoJS","AES","decrypt","toString","enc","Utf8","DirectSecp256k1HdWallet","fromMnemonic","namespaced","state","wallets","JSON","parse","window","localStorage","getItem","activeWallet","activeClient","selectedAddress","authorized","getters","client","wallet","address","nameAvailable","name","findIndex","x","lastWallet","loggedIn","signer","walletName","privKey","privkey","mutations","SET_ACTIVE_WALLET","setItem","SET_ACTIVE_CLIENT","ADD_WALLET","push","encrypt","stringify","PATH_INCREMENT","pathIncrement","ADD_ACCOUNT","account","accounts","SET_SELECTED_ADDRESS","SET_BACKUP_STATE","backupState","ADD_MESSAGE_TYPE","typeUrl","type","registry","register","SIGN_OUT","actions","signOut","commit","unlockWallet","dispatch","rootGetters","encryptedWallet","length","prefix","accountSigner","root","getAccounts","console","log","switchAccount","accountIndex","acc","addAccount","parseInt","storeWallets","signInWithPrivateKey","pKey","trim","DirectSecp256k1Wallet","fromKey","firstAccount","restoreWallet","encrypted","newName","incr","createWalletWithMnemonic","sendTransaction","message","memo","denom","fee","amount","gas","add","msg","signAndBroadcast","result"],"mappings":"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","sourcesContent":["import {\r\n\tDirectSecp256k1HdWallet,\r\n\tDirectSecp256k1Wallet\r\n} from '@cosmjs/proto-signing'\r\n\r\nimport { assertIsBroadcastTxSuccess } from '@cosmjs/stargate'\r\nimport { stringToPath } from '@cosmjs/crypto'\r\nimport CryptoJS from 'crypto-js'\r\nimport { keyFromWif, keyToWif } from '../../../helpers/keys'\r\n\r\n/* START TODO: Integrate closure below for additional security */\r\nfunction getDecryptor(password) {\r\n\tlet secret=password;\r\n\treturn async function(encryptedMnemonic, HDpath) {\r\n\t\tconst mnemonic = CryptoJS.AES.decrypt(encryptedMnemonic, secret).toString(\r\n\t\t\tCryptoJS.enc.Utf8\r\n\t\t)\r\n\t\treturn await DirectSecp256k1HdWallet.fromMnemonic(\r\n\t\t\tmnemonic,\r\n\t\t\tHDpath\r\n\t\t)\r\n\t}\r\n}\r\n/* END TODO */\r\nexport default {\r\n\tnamespaced: true,\r\n\tstate() {\r\n\t\treturn {\r\n\t\t\twallets: JSON.parse(window.localStorage.getItem('wallets')) || [],\r\n\t\t\tactiveWallet: null,\r\n\t\t\tactiveClient: null,\r\n\t\t\tselectedAddress: '',\r\n\t\t\tauthorized: false\r\n\t\t}\r\n\t},\r\n\tgetters: {\r\n\t\tclient: (state) => state.activeClient,\r\n\t\twallet: (state) => state.activeWallet,\r\n\t\taddress: (state) => state.selectedAddress,\r\n\t\tnameAvailable: (state) => (name) => {\r\n\t\t\treturn state.wallets.findIndex((x) => x.name == name) == -1\r\n\t\t},\r\n\t\tlastWallet: (state) => {\r\n\t\t\tif (state.activeWallet) {\r\n\t\t\t\treturn state.activeWallet.name\r\n\t\t\t} else {\r\n\t\t\t\treturn window.localStorage.getItem('lastWallet')\r\n\t\t\t}\r\n\t\t},\r\n\t\tloggedIn: (state) => state.activeClient !== null,\r\n\t\tsigner: (state) => {\r\n\t\t\tif (state.activeClient) {\r\n\t\t\t\treturn state.activeClient.signer\r\n\t\t\t} else {\r\n\t\t\t\treturn null\r\n\t\t\t}\r\n\t\t},\r\n\t\twalletName: (state) =>\r\n\t\t\tstate.activeWallet ? state.activeWallet.name : null,\r\n\t\tprivKey: (state) => {\r\n\t\t\tif (state.activeClient) {\r\n\t\t\t\treturn keyToWif(state.activeClient.signer.privkey)\r\n\t\t\t} else {\r\n\t\t\t\treturn null\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmutations: {\r\n\t\tSET_ACTIVE_WALLET(state, wallet) {\r\n\t\t\tstate.activeWallet = wallet\r\n\t\t\twindow.localStorage.setItem('lastWallet', wallet.name)\r\n\t\t},\r\n\t\tSET_ACTIVE_CLIENT(state, client) {\r\n\t\t\tstate.activeClient = client\r\n\t\t\tstate.authorized = true\r\n\t\t},\r\n\t\tADD_WALLET(state, wallet) {\r\n\t\t\tstate.activeWallet = wallet\r\n\t\t\twindow.localStorage.setItem('lastWallet', wallet.name)\r\n\t\t\tif (state.activeWallet.name && state.activeWallet.password) {\r\n\t\t\t\tstate.wallets.push({\r\n\t\t\t\t\tname: state.activeWallet.name,\r\n\t\t\t\t\twallet: CryptoJS.AES.encrypt(\r\n\t\t\t\t\t\tJSON.stringify(state.activeWallet),\r\n\t\t\t\t\t\tstate.activeWallet.password\r\n\t\t\t\t\t).toString()\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tPATH_INCREMENT(state) {\r\n\t\t\tstate.activeWallet.pathIncrement = state.activeWallet.pathIncrement + 1\r\n\t\t},\r\n\t\tADD_ACCOUNT(state, account) {\r\n\t\t\tstate.activeWallet.accounts.push(account)\r\n\t\t\tif (state.activeWallet.name && state.activeWallet.password) {\r\n\t\t\t\tstate.wallets[\r\n\t\t\t\t\tstate.wallets.findIndex((x) => x.name === state.activeWallet.name)\r\n\t\t\t\t].wallet = CryptoJS.AES.encrypt(\r\n\t\t\t\t\tJSON.stringify(state.activeWallet),\r\n\t\t\t\t\tstate.activeWallet.password\r\n\t\t\t\t).toString()\r\n\t\t\t}\r\n\t\t},\r\n\t\tSET_SELECTED_ADDRESS(state, address) {\r\n\t\t\tstate.selectedAddress = address\r\n\t\t},\r\n\t\tSET_BACKUP_STATE(state, backupState) {\r\n\t\t\tstate.backupState = backupState\r\n\t\t},\r\n\t\tADD_MESSAGE_TYPE(state, { typeUrl, type }) {\r\n\t\t\tstate.activeClient.registry.register(typeUrl, type)\r\n\t\t},\r\n\t\tSIGN_OUT(state) {\r\n\t\t\tstate.selectedAddress = ''\r\n\t\t\tstate.activeClient = null\r\n\t\t\tstate.activeWallet = null\r\n\t\t\tstate.authorized = false\r\n\t\t}\r\n\t},\r\n\tactions: {\r\n\t\tsignOut({ commit }) {\r\n\t\t\tcommit('SIGN_OUT')\r\n\t\t},\r\n\t\tasync unlockWallet(\r\n\t\t\t{ commit, state, dispatch, rootGetters },\r\n\t\t\t{ name, password }\r\n\t\t) {\r\n\t\t\tconst encryptedWallet =\r\n\t\t\t\tstate.wallets[state.wallets.findIndex((x) => x.name === name)].wallet\r\n\t\t\tconst wallet = JSON.parse(\r\n\t\t\t\tCryptoJS.AES.decrypt(encryptedWallet, password).toString(\r\n\t\t\t\t\tCryptoJS.enc.Utf8\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t\tcommit('SET_ACTIVE_WALLET', wallet)\r\n\t\t\tif (wallet.accounts.length > 0) {\r\n\t\t\t\tconst accountSigner = await DirectSecp256k1HdWallet.fromMnemonic(\r\n\t\t\t\t\twallet.mnemonic,\r\n\t\t\t\t\tstringToPath(wallet.HDpath + wallet.accounts[0].pathIncrement),\r\n\t\t\t\t\twallet.prefix\r\n\t\t\t\t)\r\n\t\t\t\ttry {\r\n\t\t\t\t\tawait dispatch('common/env/signIn', accountSigner, {\r\n\t\t\t\t\t\troot: true\r\n\t\t\t\t\t})\r\n\t\t\t\t\tlet client = rootGetters['common/env/signingClient']\r\n\t\t\t\t\tcommit('SET_ACTIVE_CLIENT', client)\r\n\t\t\t\t\tconst [account] = await accountSigner.getAccounts()\r\n\t\t\t\t\tcommit('SET_SELECTED_ADDRESS', account.address)\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync switchAccount({ commit, state, rootGetters, dispatch }, address) {\r\n\t\t\tconst accountIndex = state.activeWallet.accounts.findIndex(\r\n\t\t\t\t(acc) => acc.address == address\r\n\t\t\t)\r\n\t\t\tconst accountSigner = await DirectSecp256k1HdWallet.fromMnemonic(\r\n\t\t\t\tstate.activeWallet.mnemonic,\r\n\t\t\t\tstringToPath(\r\n\t\t\t\t\tstate.activeWallet.HDpath +\r\n\t\t\t\t\t\tstate.activeWallet.accounts[accountIndex].pathIncrement\r\n\t\t\t\t),\r\n\t\t\t\tstate.activeWallet.prefix\r\n\t\t\t)\r\n\r\n\t\t\ttry {\r\n\t\t\t\tawait dispatch('common/env/signIn', accountSigner, { root: true })\r\n\t\t\t\tlet client = rootGetters['common/env/signingClient']\r\n\t\t\t\tcommit('SET_ACTIVE_CLIENT', client)\r\n\t\t\t\tconst [account] = await accountSigner.getAccounts()\r\n\t\t\t\tcommit('SET_SELECTED_ADDRESS', account.address)\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync addAccount({ commit, state, dispatch }, pathIncrement) {\r\n\t\t\tif (!pathIncrement) {\r\n\t\t\t\tpathIncrement = state.activeWallet.pathIncrement + 1\r\n\t\t\t\tcommit('PATH_INCREMENT')\r\n\t\t\t}\r\n\t\t\tconst accountSigner = await DirectSecp256k1HdWallet.fromMnemonic(\r\n\t\t\t\tstate.activeWallet.mnemonic,\r\n\t\t\t\tstringToPath(state.activeWallet.HDpath + pathIncrement),\r\n\t\t\t\tstate.activeWallet.prefix\r\n\t\t\t)\r\n\t\t\tconst [acc] = await accountSigner.getAccounts()\r\n\t\t\tconst account = {\r\n\t\t\t\taddress: acc.address,\r\n\t\t\t\tpathIncrement: parseInt(pathIncrement)\r\n\t\t\t}\r\n\t\t\tif (\r\n\t\t\t\tstate.activeWallet.accounts.findIndex(\r\n\t\t\t\t\t(acc) => acc.address == account.address\r\n\t\t\t\t) == -1\r\n\t\t\t) {\r\n\t\t\t\tcommit('ADD_ACCOUNT', account)\r\n\t\t\t\tdispatch('storeWallets')\r\n\t\t\t} else {\r\n\t\t\t\tthrow 'Account already in store.'\r\n\t\t\t}\r\n\t\t},\r\n\t\tstoreWallets({ commit, state }) {\r\n\t\t\twindow.localStorage.setItem('wallets', JSON.stringify(state.wallets))\r\n\t\t\tcommit('SET_BACKUP_STATE', false)\r\n\t\t},\r\n\t\tasync signInWithPrivateKey(\r\n\t\t\t{ commit, rootGetters, dispatch },\r\n\t\t\t{ prefix = 'cosmos', privKey }\r\n\t\t) {\r\n\t\t\tconst pKey = keyFromWif(privKey.trim())\r\n\t\t\tconst accountSigner = await DirectSecp256k1Wallet.fromKey(pKey, prefix)\r\n\t\t\tconst [firstAccount] = await accountSigner.getAccounts()\r\n\r\n\t\t\ttry {\r\n\t\t\t\tawait dispatch('common/env/signIn', accountSigner, { root: true })\r\n\t\t\t\tlet client = rootGetters['common/env/signingClient']\r\n\t\t\t\tcommit('SET_ACTIVE_CLIENT', client)\r\n\t\t\t\tcommit('SET_SELECTED_ADDRESS', firstAccount.address)\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync restoreWallet(\r\n\t\t\t{ commit, dispatch, rootGetters, state },\r\n\t\t\t{ encrypted, password }\r\n\t\t) {\r\n\t\t\tconst wallet = JSON.parse(\r\n\t\t\t\tCryptoJS.AES.decrypt(encrypted, password).toString(CryptoJS.enc.Utf8)\r\n\t\t\t)\r\n\t\t\tlet newName = wallet.name\r\n\t\t\tlet incr = 1\r\n\t\t\twhile (state.wallets.findIndex((x) => x.name == newName) != -1) {\r\n\t\t\t\tnewName = wallet.name + '_' + incr\r\n\t\t\t\tincr++\r\n\t\t\t}\r\n\t\t\twallet.name = newName\r\n\t\t\tconst accountSigner = await DirectSecp256k1HdWallet.fromMnemonic(\r\n\t\t\t\twallet.mnemonic,\r\n\t\t\t\tstringToPath(wallet.HDpath + '0'),\r\n\t\t\t\twallet.prefix\r\n\t\t\t)\r\n\t\t\tconst [firstAccount] = await accountSigner.getAccounts()\r\n\t\t\tcommit('ADD_WALLET', wallet)\r\n\r\n\t\t\ttry {\r\n\t\t\t\tawait dispatch('common/env/signIn', accountSigner, { root: true })\r\n\r\n\t\t\t\tlet client = rootGetters['common/env/signingClient']\r\n\t\t\t\tcommit('SET_ACTIVE_CLIENT', client)\r\n\t\t\t\tcommit('SET_SELECTED_ADDRESS', firstAccount.address)\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t}\r\n\r\n\t\t\tdispatch('storeWallets')\r\n\t\t},\r\n\t\tasync createWalletWithMnemonic(\r\n\t\t\t{ commit, dispatch, rootGetters },\r\n\t\t\t{\r\n\t\t\t\tname = null,\r\n\t\t\t\tmnemonic,\r\n\t\t\t\tHDpath = \"m/44'/118'/0'/0/\",\r\n\t\t\t\tprefix = 'cosmos',\r\n\t\t\t\tpassword = null\r\n\t\t\t}\r\n\t\t) {\r\n\t\t\tconst wallet = {\r\n\t\t\t\tname,\r\n\t\t\t\tmnemonic,\r\n\t\t\t\tHDpath,\r\n\t\t\t\tpassword,\r\n\t\t\t\tprefix,\r\n\t\t\t\tpathIncrement: 0,\r\n\t\t\t\taccounts: []\r\n\t\t\t}\r\n\t\t\tconst accountSigner = await DirectSecp256k1HdWallet.fromMnemonic(\r\n\t\t\t\tmnemonic,\r\n\t\t\t\tstringToPath(HDpath + '0'),\r\n\t\t\t\tprefix\r\n\t\t\t)\r\n\t\t\tconst [firstAccount] = await accountSigner.getAccounts()\r\n\t\t\tconst account = { address: firstAccount.address, pathIncrement: 0 }\r\n\t\t\twallet.accounts.push(account)\r\n\t\t\tcommit('ADD_WALLET', wallet)\r\n\r\n\t\t\ttry {\r\n\t\t\t\tawait dispatch('common/env/signIn', accountSigner, { root: true })\r\n\r\n\t\t\t\tlet client = rootGetters['common/env/signingClient']\r\n\t\t\t\tcommit('SET_ACTIVE_CLIENT', client)\r\n\t\t\t\tcommit('SET_SELECTED_ADDRESS', firstAccount.address)\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t}\r\n\t\t\tdispatch('storeWallets')\r\n\t\t},\r\n\t\tasync sendTransaction({ state }, { message, memo, denom }) {\r\n\t\t\tconst fee = {\r\n\t\t\t\tamount: [{ amount: '0', denom }],\r\n\t\t\t\tgas: '200000'\r\n\t\t\t}\r\n\t\t\ttry {\r\n\t\t\t\tconsole.log({\r\n\t\t\t\t\tadd: state.selectedAddress,\r\n\t\t\t\t\tmsg: [message],\r\n\t\t\t\t\tfee,\r\n\t\t\t\t\tmemo\r\n\t\t\t\t})\r\n\t\t\t\tconst result = await state.activeClient.signAndBroadcast(\r\n\t\t\t\t\tstate.selectedAddress,\r\n\t\t\t\t\t[message],\r\n\t\t\t\t\tfee,\r\n\t\t\t\t\tmemo\r\n\t\t\t\t)\r\n\t\t\t\tassertIsBroadcastTxSuccess(result)\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t\tthrow 'Failed to broadcast transaction.' + e\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n"],"file":"wallet.js"}